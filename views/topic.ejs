<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title><%= topic.title %> | bar-demo</title>
    <link rel="stylesheet" type="text/css" href="/generic.css">
    <link rel="stylesheet" type="text/css" href="/header.css">
    <link rel="stylesheet" type="text/css" href="/reload.css">
    <link rel="stylesheet" type="text/css" href="/topic.css">
    <link rel="stylesheet" type="text/css" href="/footer.css">
</head>

<body>
    <script src="/socket.io/socket.io.js"></script>
    <%- include("header") -%>
    <%- include("reload") -%>
    <div id="mainbox">
        <div id="main-topic">
            <h1><%= topic.title %></h1>
            <p><em><%= topic.user %> | <%= topic.time %></em></p>
            <p><%= topic.message %></p>
        </div>

        <% if (replies) { %>
            <% replies.forEach(reply => { %>
                <p><em><%= reply.user %> | <%= reply.time %></em></p>
                <p><%= reply.message %></p>
            <% }) %>
        <% } %>

        <form method="POST" action="/reply/<%= topic.id %>">
            <fieldset>
                <legend>Reply</legend>
                <textarea name="message"></textarea>
                <button>Send!</button>
            </fieldset>
        </form>
    </div>

    <%- include("footer") -%>
</body>

</html>